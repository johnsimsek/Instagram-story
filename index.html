<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Story Viewer</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}

body{
  background:#000;
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial;
  overflow:hidden;
}

/* BLUR BACKGROUND */
.bg{
  position:fixed;
  inset:0;
  background-size:cover;
  background-position:center;
  filter:blur(25px) brightness(0.6);
  transform:scale(1.2);
  z-index:0;
}

/* STORY IMAGE */
.story{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:1;
}

.story img{
  max-width:100%;
  max-height:100%;
  object-fit:contain;
}

/* PROGRESS BAR */
.progress{
  position:fixed;
  top:10px;
  left:10px;
  right:10px;
  display:flex;
  gap:5px;
  z-index:10;
}

.progress span{
  flex:1;
  height:3px;
  background:rgba(255,255,255,.3);
  overflow:hidden;
}

.progress span::after{
  content:"";
  display:block;
  height:100%;
  width:0%;
  background:#fff;
  animation:fill 5s linear forwards;
}

@keyframes fill{
  to{width:100%}
}

/* TAP AREAS */
.tap{
  position:fixed;
  top:0;
  bottom:0;
  width:50%;
  z-index:20;
}
.tap.left{left:0}
.tap.right{right:0}
</style>
</head>

<body>

<div class="bg" id="bg"></div>

<div class="progress" id="progress"></div>

<div class="story">
  <img id="storyImage" src="">
</div>

<div class="tap left"></div>
<div class="tap right"></div>

<script>
/* =========================
   IMAGE SETUP
   ========================= */
const totalImages = 42;
const images = [];

for(let i = 1; i <= totalImages; i++){
  images.push(`story${i}.jpg`);
}

/* ========================= */

let index = 0;
let timer;

const img = document.getElementById("storyImage");
const bg  = document.getElementById("bg");
const progress = document.getElementById("progress");

function renderProgress(){
  progress.innerHTML="";
  images.forEach((_,i)=>{
    const bar=document.createElement("span");
    if(i < index){
      bar.innerHTML="<span style='width:100%;display:block;height:100%;background:#fff'></span>";
    }
    progress.appendChild(bar);
  });
}

function showStory(i){
  clearTimeout(timer);

  index = (i + images.length) % images.length;

  img.src = images[index];
  bg.style.backgroundImage = `url(${images[index]})`;

  renderProgress();
  progress.children[index].innerHTML = "<span></span>";

  timer = setTimeout(() => showStory(index + 1), 5000);
}

document.querySelector(".tap.right").onclick = () => showStory(index + 1);
document.querySelector(".tap.left").onclick  = () => showStory(index - 1);

showStory(0);
</script>

</body>
</html>